(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();class P{grayscale(t){for(let r=0;r<t.data.length;r+=4){const o=t.data[r]*.299+t.data[r+1]*.587+t.data[r+2]*.114;t.data.fill(o,r,r+3)}return t}threshold(t,r){for(let o=0;o<t.data.length;o+=4){const n=t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114<r?0:255;t.data.fill(n,o,o+3)}return t}bayer(t,r){const o=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]];for(let e=0;e<t.data.length;e+=4){const n=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,d=e/4%t.width,i=Math.floor(e/4/t.width),D=Math.floor((n+o[d%4][i%4])/2)<r?0:255;t.data.fill(D,e,e+3)}return t}floydsteinberg(t){const r=t.width,o=new Uint8ClampedArray(t.width*t.height);for(let e=0,n=0;n<t.data.length;e++,n+=4)o[e]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let e=0,n=0;n<t.data.length;e++,n+=4){const d=o[e]<129?0:255,i=Math.floor((o[e]-d)/16);t.data.fill(d,n,n+3),o[e+1]+=i*7,o[e+r-1]+=i*3,o[e+r]+=i*5,o[e+r+1]+=i*1}return t}atkinson(t){const r=t.width,o=new Uint8ClampedArray(t.width*t.height);for(let e=0,n=0;n<t.data.length;e++,n+=4)o[e]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let e=0,n=0;n<t.data.length;e++,n+=4){const d=o[e]<129?0:255,i=Math.floor((o[e]-d)/8);t.data.fill(d,n,n+3),o[e+1]+=i,o[e+2]+=i,o[e+r-1]+=i,o[e+r]+=i,o[e+r+1]+=i,o[e+2*r]+=i}return t}}var p=new P;let y=512;window.screen.width<512&&(y=256);const k=y/(4/3);let h=null,a=null,s=null,f=!0,m=!1,g=!1,w=!1,x="ðŸ•’",v=!1,T="floydsteinberg",b=100;const u=document.getElementsByName("dithertype"),E=document.getElementById("bayerthreshold");for(let l=0;l<u.length;l++)u[l].value=="floydsteinberg"&&(u[l].checked=!0),u[l].value=="bayer"?u[l].addEventListener("change",function(){E.innerHTML=`
      <input type="range" min="1" max="255" id="bayerrange" value=`+b+`>
      <h3>threshold</h3>
      `,document.getElementById("bayerrange").addEventListener("input",function(){b=this.value}),console.log("bayeron")}):u[l].addEventListener("change",function(){E.innerHTML="",console.log("bayeroff")}),u[l].addEventListener("click",function(){T=this.value});const M=document.getElementById("flipped");M.checked=!1;M.addEventListener("change",function(){c.translate(y,0),c.scale(-1,1)});const O=document.getElementById("color1"),H=document.getElementById("color2");O.checked=!0;const B=document.getElementById("customcolor");O.addEventListener("change",function(){B.innerHTML="",m=!1});H.addEventListener("change",function(){B.innerHTML=`
  <input type="color" id="colorselector" name="colorselector" value ="#cc0000">
  `,m=!0,c.fillStyle="#cc0000";const l=document.getElementById("colorselector");l.addEventListener("change",function(){c.fillStyle=l.value})});h=document.querySelector("video");navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(l=>{h.srcObject=l,h.play}).catch(l=>{console.error("could not get webcam")});h.setAttribute("width",y);h.setAttribute("height",k);a=document.querySelector("canvas");a.width=y;a.height=k;const S=document.getElementById("3sec");S.checked=!1;S.addEventListener("change",function(){g=!g});a.addEventListener("click",function(){v||(g&&f?(v=!0,w=!0,setTimeout(function(){C()},3e3)):A())});const I=document.getElementById("instructions");function A(){if(f=!f,f)I.innerHTML="click image to take photo";else{const l=a.toDataURL("png");I.innerHTML="<a href="+l+' target="_blank">click here to save photo</a>'}L()}function C(){A(),v=!1,w=!1}const c=a.getContext("2d");c.font="30px Inter";c.drawImage(h,0,0,a.width,a.height);h.addEventListener("play",function(){c.drawImage(this,0,0,a.width,a.height)},!1);function L(){switch(f&&requestAnimationFrame(L),c.drawImage(h,0,0,a.width,a.height),s=c.getImageData(0,0,a.width,a.height),T){case"atkinson":s=p.atkinson(s);break;case"bayer":s=p.bayer(s,b);break;case"floydsteinberg":s=p.floydsteinberg(s);break}c.putImageData(s,0,0),m&&(c.globalAlpha=.5,c.fillRect(0,0,a.width,a.height),c.globalAlpha=1),w&&c.fillText(x,30,50)}L();
